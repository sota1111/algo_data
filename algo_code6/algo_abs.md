# 6章 二分探索法
二分探索法：「探索範囲を半減させていくことによって解を求める手法」
## 6.1 配列の二分探索
本節では、「ソート済み配列の中から目的のものを高速に探索するアルゴリズム」という文脈で二分探索法を解説する。  
サイズN=8、ソート済み配列a={3,5,8,10,14,17,21,39}にkey=9が含まれているかを考える。  
keyと配列の中心の値を比較し、比較結果に応じて以下の処理を行う。
* key = 中心の値 → 探索を終了
* key < 中心の値 → 配列の左半分を残す
* key > 中心の値 → 配列の右半分を残す

ステップごとに配列サイズが半減するので、2^k<=N<2^k+1  
つまり計算量は、O(logN)
## 6.2 C++のstd::lower_bound()
C++のstd::lower_bound()の仕様：ソート済み配列aにおいて、a[i]>=keyという条件を満たす最小の添字iを返す。以下を得ることが可能。
* 配列aの中に値keyがなくても、key以上の値の範囲での最小値がわかる。
* 配列aの中に値keyが複数あったとき、そのうちの最小の添字がわかる。
## 6.3 一般化した二分探索法
一般化した二分探索法：各整数xについてtrue/falseの２値で判定される条件Pが与えられて、ある整数l,r(l＜r)が存在して、以下が成立しているとする。
* P(l) = false
* P(r) = true
* ある整数M(l＜M≦r)が存在して、x＜Mなるxに対してP(x)=falseであり、
x≧Mなるxに対してP(x)=trueである
このときD=r-lとして、二分探索法はMをO(logD)の計算量で求めることができる。
➡プログラムのl行目からr行目との間にバグがあることがわかっているとき、バグの発生した範囲を二分探索的に特定する作業と同様。
## 6.4 さらに一般化した二分探索法
一般化した実数上の二分探索法
## 6.5 応用例(1)：年齢当てゲーム
## 6.6 応用例(2)：std::lower_bound()の活用例
全探索での例題：N個の整数a[]とb[]の整数組から１つずつ選んで和を取り、考えられる整数K以上の範囲内で最小値を求めよ。  
この問題を以下のように書き換えることができる。  
a[i]を固定し、K-a[i]以上の範囲内での最小値を求める。
## 6.7 応用例(3)：最適化問題を判定問題に
「AtCoder Beginner Contest 023 D - 射撃王」  
N個の風船がそれぞれ初期状態では高度Hiの位置にあり、１秒毎にSiだけ上昇します。これらのすべての風船を射撃によって割ります。ただし、HiやSiは正の整数であるとします。  
競技開始時には１個風船を割ることができ、そこから１秒毎に１個の風船を割ることができます。最終的に全ての風船を割りたいですが、どの順番に風船を割るかは自由に選ぶことができるものとします。  
各風船を割るときに発生するペナルティは、そのときの風船の高度とします。最終的なペナルティは、各風船を割ったときに発生するペナルティの最大値とします。最終的なペナルティとして考えられる最小値を求めてください。  
- 最適化問題：「N個の値の最大値を最小にしたい」  
- 判定問題：「整数xが与えられたときに最終的なペナルティをx以下にすることができるかどうか」  
➡射撃王では、間に合うものの中の最小値を求める。
1. 絶対に間に合う時間Mを求める。
2. 間に合うMをrightにし、二分探索を行う。

同様に、「業務平準化の要求のため、N人の作業員の働き時間の最大値が最小になるようにしたい」とうスケジューリング問題などに適用可能。
## 6.8 応用例(4)：メディアン（中央値）を求める
普通に考えれば、ソートして真ん中を選べば良い。O(NlogN)  
A=max(a0,a1,,,,aN-1)としたとき、x未満の整数が(N-1)/2個以上あるか判定する。  
メディアンとは、この判定問題の答えがYesになる最小の整数x
## 6.9 まとめ
値を検索したいという要求に対しては、二分探索の他にもハッシュテーブルを用いる方法も有力。